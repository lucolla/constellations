<!DOCTYPE HTML> 
<html> 
<head> 
  <title>Google Maps JavaScript API v3 Example: Planetary Map Types using ImageMapType</title> 
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #container {
          width:100%;
          height: 100%;
          position: relative;
      }
      #map_canvas,
      #phoneLayer {
          height: 100%;
          width: 100%;
          position: absolute;
          top:0;
          left:0;}
      #phoneLayer{
          z-index:10;
          pointer-events: none;
      }
    </style>
 
 <script type="text/javascript" src="OpacityControl\ExtDraggableObject.js"></script>
 <script type="text/javascript" src="OpacityControl\OpacityControl.js"></script>
 <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=TRUE"></script> 
 <script type="text/javascript"src="InfoWindows.js"></script>
 <script type="text/javascript"src="CoordDisplay.js"></script>
 <script type="text/javascript"> 
    var mapTypes = {};

 	//Keep track of version of the file
	function sayHello() {
	   var msg = 'MiriamGreekSky 1.1 \n'+
    '1.12 Added constellations separated images - https://productforums.google.com/forum/#!topic/earth/alXEPxkK3g0  \n'+
    '1.11 Added Miriam map of the sky - jpg  \n'+
	'1.10 Added pop-up Info Area  \n'+
    '1.9  Added pop-up Info Marker  \n'+
    '1.8  Added opacity knob \n'+
    '1.3  Added Map type G_SKY_MAP_TYPES \n'+
    '1.2  Added Google Maps Java Script API v3 Key from Sergiu \n'+
    '1.1  Added example from google maps tutorial ';
	alert(msg);
	}
	
    // set up the map types

 
   mapTypes['illusky'] = {
       getTileUrl: function(coord,zoom){
        //return "/StarsNStories/Pictures/map.jpg";
        //return "starfield.jpg"

        var xTile =    coord.x ;
        var yTile = coord.y ;

        //if ( zoom == 1 ) numTiles = 48;
        //if ( zoom == 3 ) numTiles =  1728 ;
        // var numTiles = 1 << zoom; //  1 << x = 1 * 2 ** x

        //var numTiles = ( zoom - 1 ) * 18 + 48;

        var numTiles = 1 << zoom ;
        // Don't wrap tiles vertically.
        if (coord.y < 0 || coord.y >= numTiles) return null;
        if (coord.x < 0 || coord.x >= numTiles) return null;

        if (zoom == 3) {
            var num = yTile * 8 + xTile + 1;
            num = num.toString();
            if (num.length == 1) num = '0' + num;
            return './Pictures/zoom1/miriams_celectial_map_zoom1_' + num + '.png';
        }

        if (zoom == 6){
            if (coord.x >= 48) return null;
            if (coord.y >= 36) return null;

            return './Pictures/zoom3/slice_' + yTile.toString() + '_' + xTile.toString() + '.png';
        }
        //return './Pictures/mapMiriam256.jpg';
    }
    ,tileSize: new google.maps.Size(256,256)
    ,maxZoom: 6
    ,minZoom: 3
    ,radius: 1738000
    ,name: "illuSky"
    };
 
    mapTypes['sky'] = {
      getTileUrl: function(coord, zoom) {

        // if (coord.x < 0 || coord.y < 0) return null;
        // var tileNum = 1 << zoom;
        // if (coord.x >= tileNum || coord.y >= tileNum) return null;

        return getHorizontallyRepeatingTileUrl(coord, zoom, function(coord, zoom) {
          return "http://mw1.google.com/mw-planetary/sky/skytiles_v1/" +
                 coord.x + "_" + coord.y + '_' + zoom + '.jpg';
 
        });
      },
      releaseTile: function(tile){return null;},
      tileSize: new google.maps.Size(256, 256),
      isPng: false,
      maxZoom: 13,
      minZoom: 3,
      radius: 57.2957763671875,
      name: 'Sky',
      credit: 'Image Credit: SDSS, DSS Consortium, NASA/ESA/STScI'
    };
 
    // Normalizes the tile URL so that tiles repeat across the x axis (horizontally) like the
    // standard Google map tiles.
    function getHorizontallyRepeatingTileUrl(coord, zoom, urlfunc) {
      var y = coord.y;
      var x = coord.x;
 
      // tile range in one direction range is dependent on zoom level
      // 0 = 1 tile, 1 = 2 tiles, 2 = 4 tiles, 3 = 8 tiles, etc
      var tileRange = 1 << zoom;
 
      // don't repeat across y-axis (vertically)
      if (y < 0 || y >= tileRange) {
        return null;
      }
 
      // repeat across x-axis
      if (x < 0 || x >= tileRange) {
        x = (x % tileRange + tileRange) % tileRange;
      }
 
      return urlfunc({x:x,y:y}, zoom)
    }
 
    var map;
    var mapTypeIds = [];
 
    // Setup a copyright/credit line, emulating the standard Google style
    var creditNode = document.createElement('div');
    creditNode.id = 'credit-control';
    creditNode.style.fontSize = '11px';
    creditNode.style.fontFamily = 'Arial, sans-serif';
    creditNode.style.margin = '0 2px 2px 0';
    creditNode.style.whitespace = 'nowrap';
    creditNode.index = 0;
 
    function setCredit(credit) {
      creditNode.innerHTML = credit + ' -';
    }


    function translateRAtoLng(RA){

        if (RA > 12) return ( 24 - RA + 12 ) * 15 ;
        if (RA < 12) return ( 12 - RA ) * 15 ;

    };


	//Add a Ground Layer
	var imageBounds = new google.maps.LatLngBounds(
      new google.maps.LatLng(0,translateRAtoLng(6)),
      new google.maps.LatLng(30, translateRAtoLng(3)));
	var overlay;

	//Add a Ground Layer Cassiopeia
	var imageBoundsCancer = new google.maps.LatLngBounds(
      new google.maps.LatLng(0, translateRAtoLng(10)),
      new google.maps.LatLng(40, translateRAtoLng(7)));
	var overlayCancer;


    var imageBoundsCassiopeia = new google.maps.LatLngBounds(
           new google.maps.LatLng(40, translateRAtoLng(3)),
           new google.maps.LatLng(70, translateRAtoLng(21)));

    var overlayCassiopeia;
	
	
	//Add a marker on sky map
	var infoTaurus = '<div id="content">'+
	  '<div id="siteNotice">'+
	  '</div>'+
	  '<h1 id="firstHeading" class="firstHeading">Taurus Constellation</h1>'+
	  '<div id="bodyContent">'+
	  '<p><b>Taurus Constellation</b>,Taurus is one of the constellations of the zodiac,'+
	  'which means it is crossed by the plane of the ecliptic. Its name is a Latin word meaning "bull", and'+
	  'its astrological symbol is a stylized bull\'s head: Taurus.svg (Unicode ♉). Taurus is a large and prominent'+
	  'constellation in the northern hemisphere\'s winter sky. It is one of the oldest constellations, dating back to'+
	  'at least the Early Bronze Age when it marked the location of the Sun during the spring equinox. Taurus came to'+
	  'symbolize the bull in the mythologies of Ancient Babylon, Egypt and Greece.</p>'+
	  '<p>Attribution: Taurus, <a href="http://en.wikipedia.org/wiki/Taurus_(constellation)">'+
	  'http://en.wikipedia.org/wiki/Taurus_(constellation)</a> '+
	  '(last visited June 22, 2009).</p>'+
	  '</div>'+
	  '</div>';
	
	var infoCassiopeia = '<div id="content">'+
	  '<div id="siteNotice">'+
	  '</div>'+
	  '<h1 id="firstHeading" class="firstHeading">Cassiopeia Constellation</h1>'+
	  '<div id="bodyContent">'+
	  '<p><b>Cassiopeia Constellation</b>,Taurus is one of the constellations of the zodiac,'+
	  'which means it is crossed by the plane of the ecliptic. Its name is a Latin word meaning "bull", and'+
	  'its astrological symbol is a stylized bull\'s head: Taurus.svg (Unicode ♉). Taurus is a large and prominent'+
	  'constellation in the northern hemisphere\'s winter sky. It is one of the oldest constellations, dating back to'+
	  'at least the Early Bronze Age when it marked the location of the Sun during the spring equinox. Taurus came to'+
	  'symbolize the bull in the mythologies of Ancient Babylon, Egypt and Greece.</p>'+
	  '<p>Attribution: Taurus, <a href="http://en.wikipedia.org/wiki/Taurus_(constellation)">'+
	  'http://en.wikipedia.org/wiki/Taurus_(constellation)</a> '+
	  '(last visited June 22, 2009).</p>'+
	  '</div>'+
	  '</div>';
	  
    function initialize() {
 
      // push all mapType keys in to a mapTypeId array to set in the mapTypeControlOptions
      for (var key in mapTypes) {
        mapTypeIds.push(key);
      }
 
      var mapOptions = {
        zoom: 3,
        center: new google.maps.LatLng(0, translateRAtoLng(8.5)),
        mapTypeControlOptions: {
          mapTypeIds: mapTypeIds,
          style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        }
      };
      map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
 
      // push the credit/copyright custom control
      map.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(creditNode);
 
      // add the new map types to map.mapTypes
      for (key in mapTypes) {
        map.mapTypes.set(key, new google.maps.ImageMapType(mapTypes[key]));
      }
 
      // handle maptypeid_changed event to set the credit line
      google.maps.event.addListener(map, 'maptypeid_changed', function() {
        setCredit(mapTypes[map.getMapTypeId()].credit);
      });
 
      // start with the sky map type
      map.setMapTypeId('sky');
	  
	  //Add overlay Taurus 
	  overlay = new google.maps.GroundOverlay('./Constellations/taurus_trans1.png', imageBounds);
      overlay.setMap(map);	 
	  //historicalOverlay.setOpacity(0.9);
	  var initialOpacity = 1;
      //overlay.setOpacity(initialOpacity); 
      //overlay.show();	
      // Add opacity control and set initial value
	  //createOpacityControl(map, overlay, initialOpacity);
	  addInfoImage(imageBounds, map,  infoTaurus);
	 
     //Add overlay Cassiopeia 
        overlayCancer = new google.maps.GroundOverlay('./Constellations/cancer1.png', imageBoundsCancer);
        overlayCancer.setMap(map);
	  //historicalOverlay.setOpacity(0.9);
	  var initialOpacity = 1;
      //overlay.setOpacity(initialOpacity); 
      //overlay.show();	
      // Add opacity control and set initial value
	  //createOpacityControl(map, overlayCassiopeia, initialOpacity);
	  addInfoImage(imageBoundsCassiopeia, map,  infoCassiopeia);


        overlayCassiopeia = new google.maps.GroundOverlay('./Constellations/Cassiopea_Trans_40-3_70-21.gif', imageBoundsCassiopeia);
        overlayCassiopeia.setMap(map);
	 
	  //add info marker
	  //var myLatlng = new google.maps.LatLng(15, 10);
	  //addInfoMarker('infoTaurus', myLatlng, map,  infoTaurus);
	  
	  
	  //add kml layer
	  //var ctaLayer = new google.maps.KmlLayer({ url: 'http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml'  });
	  var kmlLayer = new google.maps.KmlLayer({ url: 'file://C:\Users\meri\Desktop\MiriamGreekSky\KML-Samples\CrabNebula.kml'  });
      var kmlLatlng = new google.maps.LatLng(-96.366783, 22.014467);
	  addInfoMarker('info2', kmlLatlng, map,  infoTaurus);
	  
	  ctaLayer.setMap(map);
	  
    }
 
  </script> 
</head> 
<body onload="initialize()"> 
<!--input type="button" onclick="sayHello()" value="About" /-->

<div id="container">
<div id="map_canvas">map div</div>
<div id="phoneLayer"><img src="./Constellations/phoneLayer.png" width="1920" height="1080"/></div>
</div>
<script type="text/javascript"src="CoordDisplay.js"></script>

</body> 
</html>